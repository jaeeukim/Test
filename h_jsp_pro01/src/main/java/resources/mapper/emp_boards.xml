<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="empBoardsMapper">
	<!-- 
		seq를 적용하는 또 다른 방식 (직접 시퀀스 생성) ->쓰지말고 로직 참고용으로 사용
		service에서 getNextSeq호출하는 방식으로 진행되어야함 
	<select id="getNextSeq" resultType="_int">
		SELECT EMP_BOARDS_SEQ FROM DUAL
	</select>	
	<insert id="insertDataAutoSeq" parameterType="empBoardDTO" 
		useGeneratedKeys="true" keyProperty="id" keyColumn="ID">
		INSERT INTO EMP_BOARDS(ID, TITLE, CONTENT, EMPID, CREATEDATE)
		<choose>
			<when test="id == 0">
				VALUES(EMP_BOARDS_SEQ.NEXTVAL, #{title}, #{content}, #{empId}, SYSDATE)
			</when>
			<otherwise>
				VALUES(#{id}, #{title}, #{content}, #{empId}, SYSDATE)
			</otherwise>
		</choose>			 
	</insert>
	 -->
	
	
	<insert id="insertData" parameterType="empBoardDTO" 
		useGeneratedKeys="true" keyProperty="id" keyColumn="ID">
		INSERT INTO EMP_BOARDS(ID, TITLE, CONTENT, EMPID, CREATEDATE) 
		VALUES(EMP_BOARDS_SEQ.NEXTVAL, #{title}, #{content}, #{empId}, SYSDATE)
	</insert>

</mapper>